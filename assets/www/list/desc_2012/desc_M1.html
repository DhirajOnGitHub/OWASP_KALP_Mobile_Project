<!DOCTYPE HTML>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="user-scalable=no, initial-scale=1.0, maximum-scale=1.0 minimal-ui"/>
<meta name="apple-mobile-web-app-capable" content="yes"/>
<meta name="apple-mobile-web-app-status-bar-style" content="black">

<link rel="apple-touch-icon-precomposed" sizes="114x114" href="../images/splash/splash-icon.png">
<link rel="apple-touch-startup-image" href="../../images/splash-screen.png" 			media="screen and (max-device-width: 320px)" />  
<link rel="apple-touch-startup-image" href="../../images/splash-screen@2x.png" 		media="(max-device-width: 480px) and (-webkit-min-device-pixel-ratio: 2)" /> 
<link rel="apple-touch-startup-image" sizes="640x1096" href="../../images/splash-screen@3x.png" />
<link rel="apple-touch-startup-image" sizes="1024x748" href="../../images/splash-screen-ipad-landscape" media="screen and (min-device-width : 481px) and (max-device-width : 1024px) and (orientation : landscape)" />
<link rel="apple-touch-startup-image" sizes="768x1004" href="./../images/splash/splash-screen-ipad-portrait.png" media="screen and (min-device-width : 481px) and (max-device-width : 1024px) and (orientation : portrait)" />
<link rel="apple-touch-startup-image" sizes="1536x2008" href="../../images/splash/splash-screen-ipad-portrait-retina.png"   media="(device-width: 768px)	and (orientation: portrait)	and (-webkit-device-pixel-ratio: 2)"/>
<link rel="apple-touch-startup-image" sizes="1496x2048" href="../../images/splash/splash-screen-ipad-landscape-retina.png"   media="(device-width: 768px)	and (orientation: landscape)	and (-webkit-device-pixel-ratio: 2)"/>

<title>OWASP TOP 10 Android App - Version 1.0</title>

<link href="../../css/style.css"     		 rel="stylesheet" type="text/css">
<link href="../../css/framework.css" 		 rel="stylesheet" type="text/css">
<link href="../../css/owl.carousel.css" 	 rel="stylesheet" type="text/css">
<link href="../../css/owl.theme.css" 		 rel="stylesheet" type="text/css">
<link href="../../css/swipebox.css"		 rel="stylesheet" type="text/css">
<link href="../../css/colorbox.css"		 rel="stylesheet" type="text/css">
<link href="../../css/font-awesome.css"	 rel="stylesheet" type="text/css">
<link href="../../css/animate.css"		 rel="stylesheet" type="text/css">

<script type="text/javascript" src="../../js/jquery.js"></script>
<script type="text/javascript" src="../../js/jqueryui.js"></script>
<script type="text/javascript" src="../../js/wow.js"></script>
<script type="text/javascript" src="../../js/owl.carousel.min.js"></script>
<script type="text/javascript" src="../../js/jquery.swipebox.js"></script>
<script type="text/javascript" src="../../js/colorbox.js"></script>
<script type="text/javascript" src="../../js/snap.js"></script>
<script type="text/javascript" src="../../js/countdown.js"></script>
<script type="text/javascript" src="../../js/contact.js"></script>
<script type="text/javascript" src="../../js/framework.js"></script>
<script type="text/javascript" src="../../js/framework.launcher.js"></script>
<script type="text/javascript" src="../../js/custom.js"></script>
<script type="text/javascript" src="../../js/table.js"></script>
<script type="text/javascript" src="../../cordova.js"></script>
<script type="text/javascript" src="../../js/hyperlink.js"></script>
<script type="text/javascript" src="../../js/initialize.js"></script>

<script>


</script>
</head>
<body>

<div id="preloader" style="display: none;">
	<div id="status" style="display: none;">
    	<p class="center-text">
			Loading the content...
            <em>please wait...</em>
        </p>
    </div>
</div>


<div class="header">
    <a class="deploy-navigation going-up">
        <i class="fa fa-navicon"></i>
    </a>
    <a class="header-logo" href="../../index.html"><img src="../../images/title/owasp_logo_header_1600_310.png" alt="img"></a>
</div>

<div class="header-clear"></div>

<div class="page-navigation full-bottom">
	<div class="nav-clear"></div>
    <div class="nav-item">
        <a href="../../index.html">
            <i class="fa fa-star"></i>				
            Welcome		
            <i class="fa fa-angle-right"></i>
        </a>
    </div>
    <div class="nav-item">
        <a href="../../homepage.html">
            <i class="fa fa-home"></i>				
            Homepage		
            <i class="fa fa-angle-right"></i>
        </a>
    </div>
	<div class="nav-item">
        <a href="../../cheatsheets.html">
            <i class="fa fa-list-alt"></i>
            Cheat Sheets
            <i class="fa fa-angle-right"></i>
        </a>       
    </div>
    <div class="nav-item">
        <a href="../../email.html">
            <i class="fa fa-envelope"></i>
            Email OWASP Top 10
            <i class="fa fa-angle-right"></i>
        </a>       
    </div>
    <div class="nav-item">
        <a href="../../download.html">
            <i class="fa fa-cloud-download"></i>
            Download OWASP Top 10
            <i class="fa fa-angle-right"></i>
        </a>        
    </div>
    <div class="nav-item">
        <a href="../../about.html">
            <i class="fa fa-info"></i>
            About OWASP KALP
            <i class="fa fa-angle-right"></i>
        </a>        
    </div>
    <div class="nav-item">
        <a href="../../tnc.html">
            <i class="fa fa-question-circle"></i>
            Disclaimer
            <i class="fa fa-angle-right"></i>
        </a>        
    </div>
    <div class="nav-item">
        <a href="../../contact.html">
            <i class="fa fa-phone-square"></i>
            Contact	
            <i class="fa fa-angle-right"></i>
        </a>       
    </div>
    <div class="nav-item">
        <a href="#" class="close-navigation">
            <i class="fa fa-times"></i>
            Close	
            <i class="fa fa-angle-up"></i>
        </a>       
    </div>
</div>    


<div class="content" id="content">     
    <div class="container">	
		<div class="static-notification-blue">
			<p class="center-text uppercase">M1: Insecure Data Storage</p>   
		</div>
		<div class="">
               <a class="checkbox checkbox-one" style="float:right;" onclick="toggleall();">Expand/Collapse</a>               
            </div>
       		<table class="table" id="desc-table">
			  <tbody>
				<tr onClick="toggle();"><th colspan="2" id="desc-table-header" ><a href="#" class="desc-table-header">Threat Agents</a></th></tr>
				<tr id="hidethis1"><th colspan="2" class="table-title-grey">Application Specific</th></tr>
				<tr id="hidethis11">
				<td colspan="2">
						Threats agents include lost/stolen phones and the possibility of in-the-wild exploit/malware gaining access to the device.
				</td></tr>				
				<tr onClick="toggle2();"><th colspan="2" id="desc-table-header"><a href="#" class="desc-table-header">Attack Vectors</a></th></tr>
				<tr id="hidethis2"><th colspan="2" class="table-title-red">Exploitability EASY</th></tr>
				<tr id="hidethis22">
				<td colspan="2">
						A malicious agent hooks up an unprotected device to a computer with commonly available software. They are able to see all third party application directories that often contain stored personal information.
				</td></tr>
				
				<tr onClick="toggle3();"><th colspan="2" id="desc-table-header"><a href="#" class="desc-table-header">Security Weakness</a></th></tr>
				<tr id="hidethis3">
					<th class="table-title-orange">Prevalence COMMON</th><th class="table-title-orange">Detectability EASY</th>
				</tr>
				<tr id="hidethis33">
				<td colspan="2">
						M1, insecure data storage, occurs when development teams assume that users will not have access to the phones file system and store sensitive pieces of information in data-stores on the phone. Devices file systems are often easily accessible and you should expect a malicious user to be inspecting your data stores. Rooting or jailbreaking a device usually circumvents any encryption protections and in some cases, where data is not protected properly, all that is needed to view application data is to hook the phone up to a computer and use some specialized tools.
				</td></tr>
				
				<tr onClick="toggle4();"><th colspan="2" id="desc-table-header"><a href="#" class="desc-table-header">Technical Impacts</a></th></tr>
				<tr id="hidethis4"><th colspan="2" class="table-title-red">Impact SEVERE</th></tr>
				<tr id="hidethis44">
				<td colspan="2">
						Insecure data storage can result in data loss, in the best case, for one user. In the worst case, for many users. Common valuable pieces of data seen stored include: 
						<ul>
						<li> Usernames
						</li>
						<li> Authentication tokens
						</li>
						<li> Passwords
						</li>
						<li> Cookies
						</li>
						<li> Location data
						</li>
						<li> UDID/EMEI, Device Name, Network Connection Name
						</li>
						<li> Personal Information: DoB, Address, Social, Credit Card Data
						</li>
						<li> Application Data: 
							<ul type="circle">
							<li> Stored application logs
							</li>
							<li> Debug information
							</li>
							<li> Cached application messages
							</li>
							<li> Transaction histories  </td>
							</li>
							</ul>
						</li>
						</ul>
				</td></tr>
				
				<tr onClick="toggle5();"><th colspan="2" id="desc-table-header"><a href="#" class="desc-table-header">Business Impacts</a></th></tr>
				<tr id="hidethis5"><th colspan="2" class="table-title-grey">Application / Business Specific</th></tr>
				<tr id="hidethis55"><td colspan="2">
						Insert text here
			    </td></tr>
			  </tbody>
			</table>
			
				<div class="static-notification-blue">
					<p class="center-text uppercase">Am I Vulnerable To Insecure Data Storage?</p>   
				</div>				
					
					<p style="text-align:justify;">It is important to threat-model your mobile app to understand the information assets it processes and how the underlying APIs handle those assets. These APIs should store sensitive information securely. Places OWASP most often sees data being stored insecurely include the following:
					<ul>
						<li>SQLite databases</li>
						<li>Log Files</li>
						<li>Plist Files</li>
						<li>XML Data Stores or Manifest Files</li>
						<li>Binary data stores</li>
						<li>Cookie stores</li>
						<li>SD Card</li>
						<li>Cloud synced</li>
					</ul>
					</p>
				<div class="decoration"></div>
					
					
				<div class="static-notification-blue">
					<p class="center-text uppercase">How Do I Prevent Insecure Data Storage?</p>   
				</div>								
				<p style="text-align:justify;">	The cardinal rule of mobile apps is to not store data unless absolutely necessary. As a developer you have to assume that the data is forfeited as soon as it touches the phone. You also have to consider the implications of losing mobile users' data to a silent jailbreak or root exploit. If the usability versus security tradeoff is too much for you, OWASP recommends scrutinizing your platforms data security APIs and making sure you’re calling them appropriately. The lesson here is to know what data is being stored and protect it appropriately.
				</p>
				<h6>iOS Specific Best Practices:</h6>
				<p>
					<ul>
					<li>Never store credentials on the phone file system. Force the user to authenticate using a standard web or API login scheme (over HTTPS) to the application upon each opening and ensure session timeouts are set at the bare minimum to meet the user experience requirements.</li>
					<li>Where storage or caching of information is necessary consider using a standard iOS encryption library such as CommonCrypto. However, for particularly sensitive apps, consider using whitebox cryptography solutions that avoid the leakage of binary signatures found within common encryption libraries.</li>
					<li>If the data is small, using the provided apple keychain API is recommended but, once a phone is jailbroken or exploited the keychain can be easily read. This is in addition to the threat of a bruteforce on the devices PIN, which as stated above is trivial in some cases.</li>
					<li>For databases consider using SQLcipher for Sqlite data encryption</li>
					<li>For items stored in the keychain leverage the most secure API designation, kSecAttrAccessibleWhenUnlocked (now the default in iOS 5) and for enterprise managed mobile devices ensure a strong PIN is forced, alphanumeric, larger than 4 characters.</li>
					<li>For larger or more general types of consumer-grade data, Apple’s File Protection mechanism can safely be used (see NSData Class Reference for protection options).</li>
					<li>Avoid using NSUserDefaults to store senstitve pieces of information as it stores data in plist files.</li>
					<li>Be aware that all data/entities using NSManagedObects will be stored in an unencrypted database file.</li>
					
					</p>
					<h6>Android Specific Best Practices:</h6>
					<p>
					<li>For local storage the enterprise android device administration API can be used to force encryption to local file-stores using “setStorageEncryption”</li>
					<li>For SD Card Storage some security can be achieved via the ‘javax.crypto’ library. You have a few options, but an easy one is simply to encrypt any plain text data with a master password and AES 128.</li>
					<li>Ensure any shared preferences properties are NOT MODE_WORLD_READABLE unless explicitly required for information sharing between apps.</li>
					
					</ul>
				</p>
				<div class="decoration"></div>
				<div class="static-notification-blue">
					<p class="center-text uppercase">Example Scenarios</p>   
				</div>	
					
				<h6>iOS Specific Best Practices:</h6>
					<p style="text-align:justify;">iGoat is a purposefully vulnerable mobile app for the security community to explore these types of vulnerabilities first hand. In the exercise below, we enter our credentials and log in to the fake bank app. Then, we navigate to the file system. Within the applications directory, we can see a database called “credentials.sqlite”. Exploring this database reveals that the application is storing our username and credentials (Jason:pleasedontstoremebro!) in plain text.</p>
							<table style="border:0px;" id="desc-table">
								<tr>
									<td>
									<!-- 	<a class="swipebox" href="../../images/images_2014_M2/Screen_Shot_2012-12-19_at_6.34.23_AM.png" title="One!">
									 -->	
									 <a href="#" onclick="window.open('file:///android_asset/www/images/images_2014_M2/Screen_Shot_2012-12-19_at_6.34.23_AM.png','_blank','location=yes','closebuttoncaption=Return');">
									 <img src="../../images/images_2014_M2/Screen_Shot_2012-12-19_at_6.34.23_AM.png"/>	
									</td>
								</tr>
							<tr>
								<td>
									<label style="text-align:center;" style="width:90%">Figure:	I</label>
									</a>
								</td>
							</tr>
								<tr>
									<td>
								<!-- 		<a class="swipebox" href="../../images/images_2014_M2/Screen_Shot_2012-12-19_at_6.44.51_AM.png" title="Two">
								 -->	   
								 <a href="#" onclick="window.open('file:///android_asset/www/images/images_2014_M2/Screen_Shot_2012-12-19_at_6.44.51_AM.png','_blank','location=yes','closebuttoncaption=Return');">
								  <img src="../../images/images_2014_M2/Screen_Shot_2012-12-19_at_6.44.51_AM.png"/>	 
									</td>
								</tr>
							<tr>
								<td>
									<label style="text-align:center;" style="width:90%">Figure:	II</label>
									</a>
								</td>
							</tr><tr>
									<td>
									<!-- 	<a class="swipebox" href="../../images/images_2014_M2/Screen_Shot_2012-12-19_at_10.11.15_AM.png" title="Two">
									 -->  
									 <a href="#" onclick="window.open('file:///android_asset/www/images/images_2014_M2/Screen_Shot_2012-12-19_at_10.11.15_AM.png','_blank','location=yes','closebuttoncaption=Return');">
									   <img src="../../images/images_2014_M2/Screen_Shot_2012-12-19_at_10.11.15_AM.png"/>	 
									</td>
								</tr>
							<tr>
								<td>
									<label style="text-align:center;" style="width:90%">Figure:	III</h6>
									</a>
								</td>
							</tr>
						</table>			
					
			
				<div class="decoration"></div>
				<div class="static-notification-blue">
					<p class="center-text uppercase">References</p>   
				</div>				
					<ul>
						 <li><a id="hyperlink" href="javascript:loadURL('https://www.owasp.org/index.php/IOS_Developer_Cheat_Sheet');">OWASP</a></li>
						 <li><a id="hyperlink" href="javascript:loadURL('https://www.owasp.org/index.php/IOS_Developer_Cheat_Sheet');">IOS Developer Cheat Sheet</a></li>
						 <li><a id="hyperlink" href="javascript:loadURL('http://source.android.com/devices/tech/security/');">Google Androids Developer Security Topics 1</a></li>
						 <li><a id="hyperlink" href="javascript:loadURL('http://developer.android.com/training/articles/security-tips.html');">Google Androids Developer Security Topics 2</a></li>
						 <li><a id="hyperlink" href="javascript:loadURL('https://developer.apple.com/library/mac/navigation/');">Apple's Introduction to Secure Coding</a></li>
						 <li><a id="hyperlink" href="javascript:loadURL('http://h30499.www3.hp.com/t5/Application-Security-Fortify-on/Exploring-The-OWASP-Mobile-Top-10-M1-Insecure-Data-Storage/ba-p/5904609');">Fortify On Demand Blog - Exploring The OWASP Mobile Top 10: Insecure Data Storage</a></li>
					</ul>
    </div>    
</div>
<div class="decoration"></div>
</body>
</html>


